-- Fecha: 2025-09-23
-- Ejecutable en Supabase/Postgres. Idempotente mediante ON CONFLICT.

BEGIN;

INSERT INTO producto_parametros (
  nombre_comercial, tipo_producto, moneda, duracion_anios,
  condicion_sa_tipo, sa_min, sa_max, condicion_edad_tipo, edad_min, edad_max,
  anio_1_percent, anio_2_percent, anio_3_percent, anio_4_percent, anio_5_percent,
  anio_6_percent, anio_7_percent, anio_8_percent, anio_9_percent, anio_10_percent,
  anio_11_plus_percent, puntos_multiplicador, activo, creado_por, creado_at
)
SELECT
  nombre_comercial,
  CAST(NULLIF(tipo_producto,'') AS public.tipo_producto) AS tipo_producto,
  CAST(NULLIF(moneda,'') AS public.moneda_poliza) AS moneda,
  CAST(NULLIF(duracion_anios_t,'') AS integer) AS duracion_anios,
  NULLIF(condicion_sa_tipo,'') AS condicion_sa_tipo,
  CAST(NULLIF(REPLACE(sa_min_t, ',', ''),'') AS numeric(18,2)) AS sa_min,
  CAST(NULLIF(REPLACE(sa_max_t, ',', ''),'') AS numeric(18,2)) AS sa_max,
  NULLIF(condicion_edad_tipo,'') AS condicion_edad_tipo,
  CAST(NULLIF(edad_min_t,'') AS integer) AS edad_min,
  CAST(NULLIF(edad_max_t,'') AS integer) AS edad_max,
  CAST(NULLIF(anio_1_percent_t,'') AS numeric(6,3)) AS anio_1_percent,
  CAST(NULLIF(anio_2_percent_t,'') AS numeric(6,3)) AS anio_2_percent,
  CAST(NULLIF(anio_3_percent_t,'') AS numeric(6,3)) AS anio_3_percent,
  CAST(NULLIF(anio_4_percent_t,'') AS numeric(6,3)) AS anio_4_percent,
  CAST(NULLIF(anio_5_percent_t,'') AS numeric(6,3)) AS anio_5_percent,
  CAST(NULLIF(anio_6_percent_t,'') AS numeric(6,3)) AS anio_6_percent,
  CAST(NULLIF(anio_7_percent_t,'') AS numeric(6,3)) AS anio_7_percent,
  CAST(NULLIF(anio_8_percent_t,'') AS numeric(6,3)) AS anio_8_percent,
  CAST(NULLIF(anio_9_percent_t,'') AS numeric(6,3)) AS anio_9_percent,
  CAST(NULLIF(anio_10_percent_t,'') AS numeric(6,3)) AS anio_10_percent,
  CAST(NULLIF(anio_11_plus_percent_t,'') AS numeric(6,3)) AS anio_11_plus_percent,
  1 AS puntos_multiplicador,
  COALESCE(
    CASE
      WHEN lower(NULLIF(activo_t,'')) = 'true' THEN true
      WHEN lower(NULLIF(activo_t,'')) = 'false' THEN false
      ELSE NULL
    END,
    true
  ) AS activo,
  CAST(NULLIF(creado_por,'') AS uuid) AS creado_por,
  COALESCE(CAST(NULLIF(creado_at,'') AS timestamp with time zone), now()) AS creado_at
FROM (
  VALUES
    ('STAR Temporal 1P - USD','VI','USD','1','','','','','', '65','22','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('STAR Temporal 5P - USD','VI','USD','5','','','','','', '65','35','10','10','9','9','0','0','0','0','0','0','1','true','',''),
    ('STAR Temporal 10P <0.5 - USD','VI','USD','10','<','','500,000','','', '65','35','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal 10P >0.5 - USD','VI','USD','10','>=','','500,000','','', '65','30','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal 20P <0.5 - USD','VI','USD','20','<','','500,000','','', '65','44','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal 20P >0.5 - USD','VI','USD','20','>=','','500,000','','', '65','33','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal USD','VI','USD','65','','','','<=','18','45','44','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('STAR Temporal USD','VI','USD','65','','','', '>','18','65','35','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('STAR Temporal 10 <1.5 - UDI','VI','UDI','10','<','','1,500,000','','', '65','35','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('STAR Temporal 10 >1.5 - UDI','VI','UDI','10','>=','','1,500,000','','', '65','30','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal 20<1.5 - UDI','VI','UDI','20','<','','1,500,000','','', '65','44','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR Temporal 20 >1.5 - UDI','VI','UDI','20','>=','','1,500,000','','', '65','35','15','10','5','5','5','5','5','5','5','0','1','true','',''),
    ('Se Adapta USD','VI','USD','','','','','','', '65','40','15','5','5','5','0','0','0','0','0','0','1','true','',''),
    ('Se Adapta UDI','VI','UDI','','','','','','', '65','44','15','5','5','5','0','0','0','0','0','0','1','true','',''),
    ('ORVI 99 - TP USD','VI','USD','99','','','','','', '65','44','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('ORVI 99 - 20P USD','VI','USD','20','','','','','', '65','44','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('ORVI 99 - 20P MAN USD','VI','USD','20','','','','','', '65','44','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('ORVI 99 - 15P USD','VI','USD','15','','','','','', '65','35','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('ORVI 99 - 10P USD','VI','USD','10','','','','','', '65','36','11','10','8.5','8.5','8.5','8.5','8.5','8.5','8.5','0','1','true','',''),
    ('ORVI 99 - 6P USD','VI','USD','6','','','','','', '65','20','10','5','4','4','4','0','0','0','0','0','1','true','',''),
    ('ORVI 99 - Edad 40-60 USD','VI','USD','60','','','', '>=','18','41','44','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('ORVI 99 - Edad 42-60 USD','VI','USD','60','','','', '<=','','41','35','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('ORVI 99 - PU USD','VI','USD','1','','','','','', '65','5','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('ORVI 99 - 10P UDI','VI','UDI','10','','','','','', '65','35','10','10','9','9','9','9','9','9','9','2','1','true','',''),
    ('ORVI 99 - 20P <1.5 - UDI','VI','UDI','20','<','','1,500,000','','', '65','44','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('ORVI 99 - 20P >1.5 UDI','VI','UDI','20','>=','','1,500,000','','', '65','35','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('ORVI 99 - TP  UDI','VI','UDI','99','<','','1,500,000','','', '65','44','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('ORVI 99 - TP UDI','VI','UDI','99','>=','','1,500,000','','', '65','35','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('REALIZA PB - USD','VI','USD','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','0.8','1','true','',''),
    ('REALIZA PA - USD','VI','USD','30','','','','','', '65','8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','1','true','',''),
    ('REALIZA PB - UDI','VI','UDI','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','0.8','1','true','',''),
    ('REALIZA PA - UDI','VI','UDI','30','','','','','', '65','8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','1','true','',''),
    ('OBJETIVO VIDA CR_NV - USD','VI','USD','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','0.8','1','true','',''),
    ('OBJETIVO VIDA PA - USD','VI','USD','30','','','','','', '65','8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','1','true','',''),
    ('OBJETIVO VIDA CR_NV - UDI','VI','UDI','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','0.8','1','true','',''),
    ('OBJETIVO VIDA PA - UDI','VI','UDI','30','','','','','', '65','8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','0.8','1','true','',''),
    ('LEGADO PB - MXN','VI','MXN','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','1','1','true','',''),
    ('LEGADO PA - MXN','VI','MXN','30','','','','','', '65','4','4','4','4','4','2.5','2.5','2.5','2.5','2.5','2.5','1','true','',''),
    ('LEGADO PB - USD','VI','USD','30','','','','','', '65','44','15','10','5','5','5','5','5','5','5','1','1','true','',''),
    ('LEGADO PA - USD','VI','USD','30','','','','','', '65','4','4','4','4','4','2.5','2.5','2.5','2.5','2.5','2.5','1','true','',''),
    ('STAR DOTAL 5P - USD','VI','USD','5','','','','','', '65','11','5','4','4','4','0','0','0','0','0','0','1','true','',''),
    ('STAR DOTAL 10P - USD','VI','USD','10','','','','','', '65','27','9','7','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR DOTAL 15P - USD','VI','USD','15','','','','','', '65','28','9','7','5','5','5','5','5','5','5','5','1','true','',''),
    ('STAR DOTAL 20P - USD','VI','USD','20','','','','','', '65','35','12','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('STAR DOTAL 10P - UDI','VI','UDI','10','','','','','', '65','30','9','8','5','5','5','5','5','5','5','0','1','true','',''),
    ('STAR DOTAL 20P - UDI','VI','UDI','20','','','','','', '65','35','12','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('SEGUBECA 17_9 - USD','VI','USD','16','','','','','', '65','30','9','7','3','3','3','3','3','3','3','3','1','true','',''),
    ('SEGUBECA 8_5 - USD','VI','USD','8','','','','','', '65','15','7','3','3','3','3','3','3','3','3','3','1','true','',''),
    ('SEGUBECA 17_9 - UDI','VI','UDI','16','','','','','', '65','38','9','7','3','3','3','3','3','3','3','3','1','true','',''),
    ('SEGUBECA 8_5 - UDI','VI','UDI','8','','','','','', '65','20','8','4','3','3','3','3','3','3','3','3','1','true','',''),
    ('VIDA MUJER - USD','VI','USD','20','','','','','', '65','40','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('VIDA MUJER - UDI','VI','UDI','20','','','','','', '65','40','15','10','5','5','5','5','5','5','5','2','1','true','',''),
    ('NUEVO PLENITUD +20P - USD','VI','USD','30','','','','','', '65','35','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('NUEVO PLENITUD 10_20P - USD','VI','USD','20','','','','','', '65','30','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('NUEVO PLENITUD 10P - USD','VI','USD','10','','','','','', '65','30','5','4','2','2','2','2','2','2','2','0','1','true','',''),
    ('NUEVO PLENITUD +20P - UDI','VI','UDI','30','','','','','', '65','35','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('NUEVO PLENITUD 10_20P - UDI','VI','UDI','20','','','','','', '65','30','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('NUEVO PLENITUD 15P - UDI','VI','UDI','15','','','','','', '65','32','5','4','2','2','2','2','2','2','2','2','1','true','',''),
    ('NUEVO PLENITUD 10P - UDI','VI','UDI','10','','','','','', '65','30','5','4','2','2','2','2','2','2','2','0','1','true','',''),
    ('IMAGINA SER +20P - USD','VI','USD','30','','','','','', '65','35','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('IMAGINA SER 10_20P - USD','VI','USD','20','','','','','', '65','30','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('IMAGINA SER PU - USD','VI','USD','1','','','','','', '65','8.5','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('IMAGINA SER PP - USD','VI','USD','1','','','','','', '65','0.8','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('IMAGINA SER +20P - UDI','VI','UDI','30','','','','','', '65','35','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('IMAGINA SER 10_20P - UDI','VI','UDI','20','','','','','', '65','30','12','8','5','5','5','5','5','5','5','3.5','1','true','',''),
    ('IMAGINA SER PU - UDI','VI','UDI','1','','','','','', '65','8.5','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('IMAGINA SER PP - UDI','VI','UDI','1','','','','','', '65','0.8','0','0','0','0','0','0','0','0','0','0','1','true','',''),
    ('RESPALDO EDUCATIVO - USD','VI','USD','18','','','','','', '65','35','10','10','9','9','0','0','0','0','0','0','1','true','',''),
    ('RESPALDO NEGOCIO - USD','VI','USD','20','','','','','', '65','35','10','10','9','9','0','0','0','0','0','0','1','true','',''),
    ('INTERNACIONAL - USD - NIÑOS','GMM','USD','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('INTERNACIONAL - USD - ADULTO','GMM','USD','1','','','','','5','59','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('INTERNACIONAL - USD - ADULTO MAYOR','GMM','USD','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('AM FLEX A - NIÑOS','GMM','MXN','1','','','','','0','4','15','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX A - ADULTO 1','GMM','MXN','1','','','','','5','54','30','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('AM FLEX A - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX A - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('AM FLEX AA - NIÑOS','GMM','MXN','1','','','','','0','4','15','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX AA - ADULTO 1','GMM','MXN','1','','','','','5','54','30','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('AM FLEX AA - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX AA - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('AM FLEX AAA - NIÑOS','GMM','MXN','1','','','','','0','4','15','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX AAA - ADULTO 1','GMM','MXN','1','','','','','5','54','30','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('AM FLEX AAA - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX AAA - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('AM FLEX PREFERENTE - NIÑOS','GMM','MXN','1','','','','','0','4','15','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX PREFERENTE - ADULTO 1','GMM','MXN','1','','','','','5','54','30','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('AM FLEX PREFERENTE - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('AM FLEX PREFERENTE - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PRACTICO - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PRACTICO - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PRACTICO - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PRACTICO - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PRACTICO TOTAL - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PRACTICO TOTAL - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PRACTICO TOTAL - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PRACTICO TOTAL - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PLENO - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PLENO - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PLENO - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PLENO - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PLENO NOVO - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PLENO NOVO - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PLENO NOVO - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PLENO NOVO - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PLENO MONTERREY - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PLENO MONTERREY - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PLENO MONTERREY - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PLENO MONTERREY - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('PLENO OCCIDENTE - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('PLENO OCCIDENTE - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('PLENO OCIDENTE - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('PLENO OCCIDENTE - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('INTEGRO - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('INTEGRO - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('INTEGRO - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('INTEGRO - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('ORIGINA - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('ORIGINA - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('ORIGINA - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('ORIGINA - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('ORIGINA 1 - NIÑOS','GMM','MXN','1','','','','','0','4','17','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('ORIGINA 1 - ADULTO 1','GMM','MXN','1','','','','','5','54','25','17','17','17','17','17','17','17','17','17','17','1','true','',''),
    ('ORIGINA 1 - ADULTO 2','GMM','MXN','1','','','','','55','59','13','13','13','13','13','13','13','13','13','13','13','1','true','',''),
    ('ORIGINA 1 - ADULTO MAYOR','GMM','MXN','1','','','','','60','99','10','10','10','10','10','10','10','10','10','10','10','1','true','',''),
    ('VIDA GRUPO T1 10_299','VI','MXN','1','','','','','', '', '23','23','23','23','23','23','23','23','23','23','23','1','true','',''),
    ('VIDA GRUPO T1 300_599','VI','MXN','1','','','','','', '', '20','20','20','20','20','20','20','20','20','20','20','1','true','',''),
    ('VIDA GRUPO T1 600_999','VI','MXN','1','','','','','', '', '15','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('VIDA GRUPO T2 10_299','VI','MXN','2','','','','','', '', '23','23','23','23','23','23','23','23','23','23','23','1','true','',''),
    ('VIDA GRUPO T2 300_599','VI','MXN','2','','','','','', '', '20','20','20','20','20','20','20','20','20','20','20','1','true','',''),
    ('VIDA GRUPO T2 600_999','VI','MXN','2','','','','','', '', '15','15','15','15','15','15','15','15','15','15','15','1','true','',''),
    ('GMM GRUPO ESTÁNDAR','GMM','MXN','1','','','','','', '', '18','18','18','18','18','18','18','18','18','18','18','1','true','',''),
    ('GMM GRUPO OPTIMA','GMM','MXN','1','','','','','', '', '18','18','18','18','18','18','18','18','18','18','18','1','true','',''),
    ('GMM GRUPO MÁXIMA','GMM','MXN','1','','','','','', '', '18','18','18','18','18','18','18','18','18','18','18','1','true','','')
) AS v_raw(
  nombre_comercial, tipo_producto, moneda, duracion_anios_t, condicion_sa_tipo,
  sa_min_t, sa_max_t, condicion_edad_tipo, edad_min_t, edad_max_t,
  anio_1_percent_t, anio_2_percent_t, anio_3_percent_t, anio_4_percent_t, anio_5_percent_t,
  anio_6_percent_t, anio_7_percent_t, anio_8_percent_t, anio_9_percent_t, anio_10_percent_t,
  anio_11_plus_percent_t, puntos_multiplicador_t, activo_t, creado_por, creado_at
)
ON CONFLICT (
  nombre_comercial, moneda_key, duracion_anios_key,
  condicion_sa_tipo_key, sa_min_key, sa_max_key,
  condicion_edad_tipo_key, edad_min_key, edad_max_key
)
DO UPDATE SET
  anio_1_percent = EXCLUDED.anio_1_percent,
  anio_2_percent = EXCLUDED.anio_2_percent,
  anio_3_percent = EXCLUDED.anio_3_percent,
  anio_4_percent = EXCLUDED.anio_4_percent,
  anio_5_percent = EXCLUDED.anio_5_percent,
  anio_6_percent = EXCLUDED.anio_6_percent,
  anio_7_percent = EXCLUDED.anio_7_percent,
  anio_8_percent = EXCLUDED.anio_8_percent,
  anio_9_percent = EXCLUDED.anio_9_percent,
  anio_10_percent = EXCLUDED.anio_10_percent,
  anio_11_plus_percent = EXCLUDED.anio_11_plus_percent,
  puntos_multiplicador = EXCLUDED.puntos_multiplicador,
  activo = COALESCE(EXCLUDED.activo, producto_parametros.activo);

COMMIT;
